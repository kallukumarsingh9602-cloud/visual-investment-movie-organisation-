<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VIMO - Classic Original</title>
    
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, doc, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        // Firebase Config
        const firebaseConfig = {
            apiKey: "AIzaSyAsQ_s-wVM6ExA9LACpiQN0p6vjc1BlT6o",
            authDomain: "vimo-4429c.firebaseapp.com",
            projectId: "vimo-4429c",
            storageBucket: "vimo-4429c.firebasestorage.app",
            messagingSenderId: "102294685320",
            appId: "1:102294685320:web:4f709c7c89e23d8435c13d"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        window.db = db;

        window.onload = () => {
            if(localStorage.getItem('vimoUser')) window.location.href = "home.html";
            
            // Auto Referral Logic
            const urlParams = new URLSearchParams(window.location.search);
            const ref = urlParams.get('ref');
            document.getElementById('invCode').value = ref ? ref : "009602";
        };
    </script>

    <style>
        :root { --primary-green: #2ecc71; --overlay-blue: rgba(35, 55, 75, 0.88); }
        body {
            margin: 0; font-family: 'Arial', sans-serif;
            background: url('https://images.unsplash.com/photo-1485846234645-a62644f84728?q=80&w=2059&auto=format&fit=crop') no-repeat center center fixed;
            background-size: cover; color: white; display: flex; justify-content: center; align-items: center; min-height: 100vh;
        }
        .overlay { background: var(--overlay-blue); width: 100%; min-height: 100vh; display: flex; flex-direction: column; align-items: center; position: relative; }
        
        /* Left Side Social Icons */
        .left-icons { position: absolute; top: 25px; left: 20px; display: flex; gap: 15px; }
        .left-icons img { width: 32px; filter: drop-shadow(0 0 5px rgba(0,0,0,0.5)); }

        /* Right Side Service Icon */
        .service-icon { position: absolute; top: 25px; right: 25px; text-align: center; color: white; text-decoration: none; font-size: 13px; }
        .service-icon img { width: 38px; display: block; margin: 0 auto 3px; filter: drop-shadow(0 0 5px black); }

        .container { width: 90%; max-width: 380px; text-align: center; margin-top: 70px; }
        .logo { font-size: 68px; font-weight: 900; color: #ff7675; letter-spacing: -2px; margin-bottom: 0px; }
        .page-title { font-size: 28px; margin-bottom: 35px; font-weight: 300; }

        /* Classic Input Box */
        .input-group { background: rgba(255, 255, 255, 0.12); border: 1px solid rgba(255,255,255,0.3); border-radius: 8px; margin-bottom: 20px; display: flex; align-items: center; padding: 14px 18px; }
        .input-group img:first-child { width: 22px; margin-right: 15px; border-right: 1px dashed rgba(255,255,255,0.5); padding-right: 12px; }
        
        input { background: transparent; border: none; color: white; outline: none; width: 100%; font-size: 18px; }
        .eye-btn { cursor: pointer; width: 22px !important; border: none !important; padding: 0 !important; opacity: 0.8; }

        .remember-sec { display: flex; align-items: center; gap: 10px; font-size: 15px; margin-bottom: 15px; width: 100%; justify-content: flex-start; }
        .btn-main { background: var(--primary-green); border-radius: 12px; padding: 18px; width: 100%; border: none; color: white; font-size: 22px; font-weight: bold; cursor: pointer; box-shadow: 0 5px 20px rgba(0,0,0,0.4); }
        .btn-sub { background: transparent; border: 1px solid rgba(255,255,255,0.5); border-radius: 35px; padding: 14px; width: 100%; color: white; margin-top: 25px; cursor: pointer; font-size: 16px; }

        .lang-sec { margin-top: 45px; display: flex; gap: 15px; }
        .lang-btn { background: rgba(255,255,255,0.08); border: 1px solid white; color: white; padding: 8px 25px; cursor: pointer; border-radius: 5px; font-size: 14px; }

        #msgBox { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 10000; padding: 25px 45px; border-radius: 15px; font-size: 22px; font-weight: bold; display: none; text-align: center; min-width: 270px; box-shadow: 0 0 40px rgba(0,0,0,0.7); }
        .success { background-color: #2ecc71; color: white; }
        .error { background-color: #e74c3c; color: white; }
        
        .page { display: none; width: 100%; flex-direction: column; align-items: center; }
        .active { display: flex; }
    </style>
</head>
<body>
    <div class="overlay">
        <div class="left-icons">
            <a href="https://t.me/vimo99film" target="_blank"><img src="https://cdn-icons-png.flaticon.com/512/2111/2111646.png" alt="TG"></a>
            <a href="https://whatsapp.com/channel/0029Vb77Ct2GzzKbIUi2EG0a" target="_blank"><img src="https://cdn-icons-png.flaticon.com/512/733/733585.png" alt="WA"></a>
        </div>

        <a href="https://wa.me/919708809498" class="service-icon">
            <img src="https://cdn-icons-png.flaticon.com/512/126/126432.png">
            <span id="txt-service">Service</span>
        </a>

        <div id="msgBox"></div>

        <div id="loginPage" class="page active">
            <div class="container">
                <div class="logo">VIMO</div>
                <div id="txt-login-head" class="page-title">Log in</div>
                <div class="input-group">
                    <img src="https://cdn-icons-png.flaticon.com/512/1077/1077114.png">
                    <input type="number" id="lPhone" placeholder="Mobile Number">
                </div>
                <div class="input-group">
                    <img src="https://cdn-icons-png.flaticon.com/512/3064/3064155.png">
                    <input type="password" id="lPass" placeholder="Password">
                    <img src="https://cdn-icons-png.flaticon.com/512/159/159604.png" class="eye-btn" onclick="togglePass('lPass')">
                </div>
                <div class="remember-sec">
                    <input type="checkbox" checked style="width:18px;height:18px;">
                    <span id="txt-rem">Remember Password</span>
                </div>
                <button class="btn-main" id="txt-login-btn" onclick="doLogin()">Login Success!</button>
                <button class="btn-sub" id="txt-no-acc" onclick="goPage('regPage')">No account? Register</button>
            </div>
        </div>

        <div id="regPage" class="page">
            <div class="container">
                <div class="logo">VIMO</div>
                <div id="txt-reg-head" class="page-title">Register</div>
                <div class="input-group">
                    <img src="https://cdn-icons-png.flaticon.com/512/1077/1077114.png">
                    <input type="number" id="rPhone" placeholder="Mobile Number">
                </div>
                <div class="input-group">
                    <img src="https://cdn-icons-png.flaticon.com/512/3064/3064155.png">
                    <input type="password" id="rPass" placeholder="Password (Min 8 Digits)">
                    <img src="https://cdn-icons-png.flaticon.com/512/159/159604.png" class="eye-btn" onclick="togglePass('rPass')">
                </div>
                <div class="input-group">
                    <img src="https://cdn-icons-png.flaticon.com/512/3064/3064155.png">
                    <input type="password" id="rCPass" placeholder="Confirm Password">
                    <img src="https://cdn-icons-png.flaticon.com/512/159/159604.png" class="eye-btn" onclick="togglePass('rCPass')">
                </div>
                <div class="input-group">
                    <img src="https://cdn-icons-png.flaticon.com/512/912/912318.png">
                    <input type="text" id="invCode" placeholder="Invitation Code">
                </div>
                <button class="btn-main" id="txt-reg-btn" onclick="doReg()">Register now</button>
                <button class="btn-sub" id="txt-have-acc" onclick="goPage('loginPage')">Already have account? Log in</button>
            </div>
        </div>

        <div class="lang-sec">
            <button class="lang-btn" onclick="setLang('en')">English</button>
            <button class="lang-btn" onclick="setLang('hi')">हिंदी</button>
        </div>
    </div>

    <script type="module">
        import { doc, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        window.togglePass = (id) => {
            const x = document.getElementById(id);
            x.type = x.type === "password" ? "text" : "password";
        }

        window.goPage = (p) => {
            document.getElementById('loginPage').className = p === 'loginPage' ? 'page active' : 'page';
            document.getElementById('regPage').className = p === 'regPage' ? 'page active' : 'page';
        }

        window.setLang = (l) => {
            const en = l === 'en';
            document.getElementById('txt-service').innerText = en ? "Service" : "सेवा";
            document.getElementById('txt-login-head').innerText = en ? "Log in" : "लॉग इन";
            document.getElementById('txt-reg-head').innerText = en ? "Register" : "रजिस्टर";
            document.getElementById('txt-rem').innerText = en ? "Remember Password" : "पासवर्ड याद रखें";
            document.getElementById('txt-login-btn').innerText = en ? "Login Success!" : "अभी लॉगिन करें";
            document.getElementById('txt-reg-btn').innerText = en ? "Register now" : "अभी रजिस्टर करें";
            document.getElementById('txt-no-acc').innerText = en ? "No account? Register" : "खाता नहीं है? रजिस्टर करें";
            document.getElementById('txt-have-acc').innerText = en ? "Already have account? Log in" : "पहले से खाता है? लॉगिन करें";
            
            // Placeholders
            document.getElementById('lPhone').placeholder = en ? "Mobile Number" : "मोबाइल नंबर";
            document.getElementById('lPass').placeholder = en ? "Password" : "पासवर्ड";
            document.getElementById('rPhone').placeholder = en ? "Mobile Number" : "मोबाइल नंबर";
            document.getElementById('rPass').placeholder = en ? "Password (Min 8 Digits)" : "पासवर्ड (कम से कम 8 अंक)";
            document.getElementById('rCPass').placeholder = en ? "Confirm Password" : "पासवर्ड की पुष्टि करें";
            document.getElementById('invCode').placeholder = en ? "Invitation Code" : "आमंत्रण कोड";
        }

        function showMsg(m, t) {
            const b = document.getElementById("msgBox");
            b.innerText = m; b.className = t; b.style.display = "block";
            setTimeout(() => { b.style.display = "none"; }, 2500);
        }

        window.doReg = async () => {
            const ph = document.getElementById('rPhone').value;
            const ps = document.getElementById('rPass').value;
            const cps = document.getElementById('rCPass').value;
            const inv = document.getElementById('invCode').value;

            if(ph.length < 10) return showMsg("Invalid Number", "error");
            if(ps.length < 8) return showMsg("Min 8 Digits", "error");
            if(ps !== cps) return showMsg("Not Match", "error");

            try {
                const userRef = doc(window.db, "users", ph);
                const snap = await getDoc(userRef);
                
                if(snap.exists()){
                    showMsg("This phone number has bind", "error");
                    setTimeout(() => goPage('loginPage'), 2000);
                    return;
                }

                await setDoc(userRef, { phone: ph, pass: ps, invite: inv, balance: 0 });
                showMsg("Success!", "success");
                setTimeout(() => goPage('loginPage'), 2000);
            } catch(e) { showMsg("Error", "error"); }
        }

        window.doLogin = async () => {
            const ph = document.getElementById('lPhone').value;
            const ps = document.getElementById('lPass').value;
            if(!ph) return;

            try {
                const snap = await getDoc(doc(window.db, "users", ph));
                if(snap.exists()) {
                    if(snap.data().pass === ps) {
                        localStorage.setItem('vimoUser', ph);
                        showMsg("Login Success!", "success");
                        setTimeout(() => window.location.href="home.html", 1500);
                    } else {
                        showMsg("Wrong Password", "error");
                    }
                } else {
                    showMsg("Please register your number", "error");
                    setTimeout(() => goPage('regPage'), 2000);
                }
            } catch(e) { showMsg("Failed", "error"); }
        }
    </script>
</body>
</html>
