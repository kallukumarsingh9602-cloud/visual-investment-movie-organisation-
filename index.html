
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VIMO - Classic Original</title>
    
    <script type="text/javascript">
    var Tawk_API=Tawk_API||{}, Tawk_LoadStart=new Date();
    (function(){
    var s1=document.createElement("script"),s0=document.getElementsByTagName("script")[0];
    s1.async=true;
    s1.src='https://embed.tawk.to/6967c2ba8200d5197fd8cf73/1jeul1af4';
    s1.charset='UTF-8';
    s1.setAttribute('crossorigin','*');
    s0.parentNode.insertBefore(s1,s0);
    })();
    </script>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, doc, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAsQ_s-wVM6ExA9LACpiQN0p6vjc1BlT6o",
            authDomain: "vimo-4429c.firebaseapp.com",
            projectId: "vimo-4429c",
            storageBucket: "vimo-4429c.firebasestorage.app",
            messagingSenderId: "102294685320",
            appId: "1:102294685320:web:4f709c7c89e23d8435c13d"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        window.db = db;

        window.onload = () => {
            if(localStorage.getItem('vimoUser')) window.location.href = "home.html";
            
            const urlParams = new URLSearchParams(window.location.search);
            const ref = urlParams.get('ref');
            if(ref) {
                document.getElementById('invCode').value = ref;
                document.getElementById('invCode').readOnly = true; 
            } else {
                document.getElementById('invCode').value = "009602"; 
            }
            renderLanguages(languages);
        };
    </script>

    <style>
        :root { --primary-green: #2ecc71; --overlay-blue: rgba(35, 55, 75, 0.88); }
        body { margin: 0; font-family: 'Arial', sans-serif; background: url('https://images.unsplash.com/photo-1485846234645-a62644f84728?q=80&w=2059&auto=format&fit=crop') no-repeat center center fixed; background-size: cover; color: white; display: flex; justify-content: center; align-items: center; min-height: 100vh; }
        .overlay { background: var(--overlay-blue); width: 100%; min-height: 100vh; display: flex; flex-direction: column; align-items: center; position: relative; }
        .left-icons { position: absolute; top: 25px; left: 20px; display: flex; gap: 15px; }
        .left-icons img { width: 32px; filter: drop-shadow(0 0 5px rgba(0,0,0,0.5)); }
        .service-icon { position: absolute; top: 25px; right: 25px; text-align: center; color: white; text-decoration: none; font-size: 13px; cursor: pointer; border: none; background: transparent; outline: none; }
        .service-icon img { width: 38px; display: block; margin: 0 auto 3px; filter: drop-shadow(0 0 5px black); }
        .container { width: 90%; max-width: 380px; text-align: center; margin-top: 70px; }
        .logo { font-size: 68px; font-weight: 900; color: #ff7675; letter-spacing: -2px; margin-bottom: 0px; }
        .page-title { font-size: 28px; margin-bottom: 35px; font-weight: 300; }
        .input-group { background: rgba(255, 255, 255, 0.12); border: 1px solid rgba(255,255,255,0.3); border-radius: 8px; margin-bottom: 20px; display: flex; align-items: center; padding: 14px 18px; }
        .input-group img:first-child { width: 22px; margin-right: 15px; border-right: 1px dashed rgba(255,255,255,0.5); padding-right: 12px; }
        input { background: transparent; border: none; color: white; outline: none; width: 100%; font-size: 18px; }
        .eye-btn { cursor: pointer; width: 22px !important; border: none !important; padding: 0 !important; opacity: 0.8; }
        .remember-sec { display: flex; align-items: center; gap: 10px; font-size: 15px; margin-bottom: 15px; width: 100%; justify-content: flex-start; }
        .btn-main { background: var(--primary-green); border-radius: 12px; padding: 18px; width: 100%; border: none; color: white; font-size: 22px; font-weight: bold; cursor: pointer; box-shadow: 0 5px 20px rgba(0,0,0,0.4); }
        .btn-sub { background: transparent; border: 1px solid rgba(255,255,255,0.5); border-radius: 35px; padding: 14px; width: 100%; color: white; margin-top: 25px; cursor: pointer; font-size: 16px; }
        .lang-sec { margin-top: 45px; }
        .lang-btn { background: rgba(255,255,255,0.08); border: 1px solid white; color: white; padding: 8px 25px; cursor: pointer; border-radius: 5px; font-size: 14px; }
        #msgBox { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 10000; padding: 25px 45px; border-radius: 15px; font-size: 22px; font-weight: bold; display: none; text-align: center; min-width: 270px; box-shadow: 0 0 40px rgba(0,0,0,0.7); }
        .success { background-color: #2ecc71; color: white; }
        .error { background-color: #e74c3c; color: white; }
        .page { display: none; width: 100%; flex-direction: column; align-items: center; }
        .active { display: flex; }
        #langOverlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: white; color: black; display: none; flex-direction: column; z-index: 10000; }
        .lang-header { padding: 20px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #eee; }
        .search-bar { width: 70%; padding: 10px; border: 1px solid #ccc; border-radius: 20px; outline: none; font-size: 16px; }
        input#langSearch { color: black !important; }
        .lang-list { flex: 1; overflow-y: auto; padding: 10px; }
        .lang-item { display: flex; align-items: center; padding: 15px; border-bottom: 1px solid #f9f9f9; cursor: pointer; }
        .lang-item:hover { background: #f0f0f0; }
        .flag { font-size: 24px; margin-right: 15px; }
        .lang-name { font-size: 18px; font-weight: 500; }
        #google_translate_element { display: none; }
    </style>
</head>
<body>
    <div id="google_translate_element"></div>
    <div class="overlay">
        <div class="left-icons">
            <a href="https://t.me/vimo99film" target="_blank"><img src="https://cdn-icons-png.flaticon.com/512/2111/2111646.png" alt="TG"></a>
            <a href="https://whatsapp.com/channel/0029Vb77Ct2GzzKbIUi2EG0a" target="_blank"><img src="https://cdn-icons-png.flaticon.com/512/733/733585.png" alt="WA"></a>
        </div>

        <div onclick="Tawk_API.toggle()" class="service-icon">
            <img src="https://cdn-icons-png.flaticon.com/512/126/126432.png">
            <span id="service-label">Service</span>
        </div>

        <div id="msgBox"></div>

        <div id="loginPage" class="page active">
            <div class="container">
                <div class="logo">VIMO</div>
                <div class="page-title" id="login-title">Log in</div>
                <div class="input-group">
                    <img src="https://cdn-icons-png.flaticon.com/512/1077/1077114.png">
                    <input type="number" id="lPhone" placeholder="Enter your mobile number">
                </div>
                <div class="input-group">
                    <img src="https://cdn-icons-png.flaticon.com/512/3064/3064155.png">
                    <input type="password" id="lPass" placeholder="Password">
                    <img src="https://cdn-icons-png.flaticon.com/512/159/159604.png" class="eye-btn" onclick="togglePass('lPass')">
                </div>
                <div class="remember-sec">
                    <input type="checkbox" checked style="width:18px;height:18px;">
                    <span id="remember-label">Remember Password</span>
                </div>
                <button class="btn-main" id="login-btn" onclick="doLogin()">Login Success!</button>
                <button class="btn-sub" id="go-register-btn" onclick="goPage('regPage')">No account? Register</button>
            </div>
        </div>

        <div id="regPage" class="page">
            <div class="container">
                <div class="logo">VIMO</div>
                <div class="page-title" id="register-title">Register</div>
                <div class="input-group">
                    <img src="https://cdn-icons-png.flaticon.com/512/1077/1077114.png">
                    <input type="number" id="rPhone" placeholder="Enter your mobile number">
                </div>
                <div class="input-group">
                    <img src="https://cdn-icons-png.flaticon.com/512/3064/3064155.png">
                    <input type="password" id="rPass" placeholder="Password (Min 8 Digits)">
                    <img src="https://cdn-icons-png.flaticon.com/512/159/159604.png" class="eye-btn" onclick="togglePass('rPass')">
                </div>
                <div class="input-group">
                    <img src="https://cdn-icons-png.flaticon.com/512/3064/3064155.png">
                    <input type="password" id="rCPass" placeholder="Confirm Password">
                    <img src="https://cdn-icons-png.flaticon.com/512/159/159604.png" class="eye-btn" onclick="togglePass('rCPass')">
                </div>
                <div class="input-group">
                    <img src="https://cdn-icons-png.flaticon.com/512/912/912318.png">
                    <input type="text" id="invCode" placeholder="Invitation Code">
                </div>
                <button class="btn-main" id="register-btn" onclick="doReg()">Register now</button>
                <button class="btn-sub" id="go-login-btn" onclick="goPage('loginPage')">Already have account? Log in</button>
            </div>
        </div>

        <div class="lang-sec">
            <button class="lang-btn" id="lang-btn" onclick="openLang()">Language</button>
        </div>
    </div>

    <div id="langOverlay">
        <div class="lang-header">
            <input type="text" class="search-bar" id="langSearch" placeholder="Search language..." onkeyup="filterLanguages()">
            <button onclick="closeLang()" style="border:none; background:none; font-size:20px; cursor:pointer;">&#10005;</button>
        </div>
        <div class="lang-list" id="list-container"></div>
    </div>
    <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
    <script type="module">
        import { doc, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const languages = [
            { name: "Afrikaans", code: "af", flag: "ðŸ‡¿ðŸ‡¦" }, { name: "Albanian", code: "sq", flag: "ðŸ‡¦ðŸ‡±" },
            { name: "Amharic", code: "am", flag: "ðŸ‡ªðŸ‡¹" }, { name: "Arabic", code: "ar", flag: "ðŸ‡¸ðŸ‡¦" },
            { name: "Armenian", code: "hy", flag: "ðŸ‡¦ðŸ‡²" }, { name: "Azerbaijani", code: "az", flag: "ðŸ‡¦ðŸ‡¿" },
            { name: "Basque", code: "eu", flag: "ðŸ‡ªðŸ‡¸" }, { name: "Belarusian", code: "be", flag: "ðŸ‡§ðŸ‡¾" },
            { name: "Bosnian", code: "bs", flag: "ðŸ‡§ðŸ‡¦" }, { name: "Bulgarian", code: "bg", flag: "ðŸ‡§ðŸ‡¬" },
            { name: "Catalan", code: "ca", flag: "ðŸ‡ªðŸ‡¸" }, { name: "Cebuano", code: "ceb", flag: "ðŸ‡µðŸ‡­" },
            { name: "Chichewa", code: "ny", flag: "ðŸ‡²ðŸ‡¼" }, { name: "Chinese (Simplified)", code: "zh-CN", flag: "ðŸ‡¨ðŸ‡³" },
            { name: "Chinese (Traditional)", code: "zh-TW", flag: "ðŸ‡¹ðŸ‡¼" }, { name: "Corsican", code: "co", flag: "ðŸ‡«ðŸ‡·" },
            { name: "Croatian", code: "hr", flag: "ðŸ‡­ðŸ‡·" }, { name: "Czech", code: "cs", flag: "ðŸ‡¨ðŸ‡¿" },
            { name: "Danish", code: "da", flag: "ðŸ‡©ðŸ‡°" }, { name: "Dutch", code: "nl", flag: "ðŸ‡³ðŸ‡±" },
            { name: "English", code: "en", flag: "ðŸ‡ºðŸ‡¸" }, { name: "Esperanto", code: "eo", flag: "ðŸ³ï¸" },
            { name: "Estonian", code: "et", flag: "ðŸ‡ªðŸ‡ª" }, { name: "Filipino", code: "tl", flag: "ðŸ‡µðŸ‡­" },
            { name: "Finnish", code: "fi", flag: "ðŸ‡«ðŸ‡®" }, { name: "French", code: "fr", flag: "ðŸ‡«ðŸ‡·" },
            { name: "Frisian", code: "fy", flag: "ðŸ‡³ðŸ‡±" }, { name: "Galician", code: "gl", flag: "ðŸ‡ªðŸ‡¸" },
            { name: "Georgian", code: "ka", flag: "ðŸ‡¬ðŸ‡ª" }, { name: "German", code: "de", flag: "ðŸ‡©ðŸ‡ª" },
            { name: "Greek", code: "el", flag: "ðŸ‡¬ðŸ‡·" }, { name: "Haitian Creole", code: "ht", flag: "ðŸ‡­ðŸ‡¹" },
            { name: "Hausa", code: "ha", flag: "ðŸ‡³ðŸ‡¬" }, { name: "Hawaiian", code: "haw", flag: "ðŸ‡ºðŸ‡¸" },
            { name: "Hebrew", code: "iw", flag: "ðŸ‡®ðŸ‡±" }, { name: "Hindi", code: "hi", flag: "ðŸ‡®ðŸ‡³" },
            { name: "Hmong", code: "hmn", flag: "ðŸ‡¨ðŸ‡³" }, { name: "Hungarian", code: "hu", flag: "ðŸ‡­ðŸ‡º" },
            { name: "Icelandic", code: "is", flag: "ðŸ‡®ðŸ‡¸" }, { name: "Igbo", code: "ig", flag: "ðŸ‡³ðŸ‡¬" },
            { name: "Indonesian", code: "id", flag: "ðŸ‡®ðŸ‡©" }, { name: "Irish", code: "ga", flag: "ðŸ‡®ðŸ‡ª" },
            { name: "Italian", code: "it", flag: "ðŸ‡®ðŸ‡¹" }, { name: "Japanese", code: "ja", flag: "ðŸ‡¯ðŸ‡µ" },
            { name: "Javanese", code: "jw", flag: "ðŸ‡®ðŸ‡©" }, { name: "Kazakh", code: "kk", flag: "ðŸ‡°ðŸ‡¿" },
            { name: "Khmer", code: "km", flag: "ðŸ‡°ðŸ‡­" }, { name: "Kinyarwanda", code: "rw", flag: "ðŸ‡·ðŸ‡¼" },
            { name: "Korean", code: "ko", flag: "ðŸ‡°ðŸ‡·" }, { name: "Kurdish (Kurmanji)", code: "ku", flag: "ðŸ‡¹ðŸ‡·" },
            { name: "Kyrgyz", code: "ky", flag: "ðŸ‡°ðŸ‡¬" }, { name: "Lao", code: "lo", flag: "ðŸ‡±ðŸ‡¦" },
            { name: "Latin", code: "la", flag: "ðŸ³ï¸" }, { name: "Latvian", code: "lv", flag: "ðŸ‡±ðŸ‡»" },
            { name: "Lithuanian", code: "lt", flag: "ðŸ‡±ðŸ‡¹" }, { name: "Luxembourgish", code: "lb", flag: "ðŸ‡±ðŸ‡º" },
            { name: "Macedonian", code: "mk", flag: "ðŸ‡²ðŸ‡°" }, { name: "Malagasy", code: "mg", flag: "ðŸ‡²ðŸ‡¬" },
            { name: "Malay", code: "ms", flag: "ðŸ‡²ðŸ‡¾" }, { name: "Maltese", code: "mt", flag: "ðŸ‡²ðŸ‡¹" },
            { name: "Maori", code: "mi", flag: "ðŸ‡³ðŸ‡¿" }, { name: "Mongolian", code: "mn", flag: "ðŸ‡²ðŸ‡³" },
            { name: "Myanmar (Burmese)", code: "my", flag: "ðŸ‡²ðŸ‡²" }, { name: "Nepali", code: "ne", flag: "ðŸ‡³ðŸ‡µ" },
            { name: "Norwegian", code: "no", flag: "ðŸ‡³ðŸ‡´" }, { name: "Pashto", code: "ps", flag: "ðŸ‡¦ðŸ‡«" },
            { name: "Persian", code: "fa", flag: "ðŸ‡®ðŸ‡·" }, { name: "Polish", code: "pl", flag: "ðŸ‡µðŸ‡±" },
            { name: "Portuguese", code: "pt", flag: "ðŸ‡µðŸ‡¹" }, { name: "Romanian", code: "ro", flag: "ðŸ‡·ðŸ‡´" },
            { name: "Russian", code: "ru", flag: "ðŸ‡·ðŸ‡º" }, { name: "Samoan", code: "sm", flag: "ðŸ‡¼ðŸ‡¸" },
            { name: "Scots Gaelic", code: "gd", flag: "ðŸ‡¬ðŸ‡§" }, { name: "Serbian", code: "sr", flag: "ðŸ‡·ðŸ‡¸" },
            { name: "Sesotho", code: "st", flag: "ðŸ‡±ðŸ‡¸" }, { name: "Shona", code: "sn", flag: "ðŸ‡¿ðŸ‡¼" },
            { name: "Sindhi", code: "sd", flag: "ðŸ‡µðŸ‡°" }, { name: "Sinhala", code: "si", flag: "ðŸ‡±ðŸ‡°" },
            { name: "Slovak", code: "sk", flag: "ðŸ‡¸ðŸ‡°" }, { name: "Slovenian", code: "sl", flag: "ðŸ‡¸ðŸ‡®" },
            { name: "Somali", code: "so", flag: "ðŸ‡¸ðŸ‡´" }, { name: "Spanish", code: "es", flag: "ðŸ‡ªðŸ‡¸" },
            { name: "Sundanese", code: "su", flag: "ðŸ‡®ðŸ‡©" }, { name: "Swahili", code: "sw", flag: "ðŸ‡¹ðŸ‡¿" },
            { name: "Swedish", code: "sv", flag: "ðŸ‡¸ðŸ‡ª" }, { name: "Tajik", code: "tg", flag: "ðŸ‡¹ðŸ‡¯" },
            { name: "Tatar", code: "tt", flag: "ðŸ‡·ðŸ‡º" }, { name: "Thai", code: "th", flag: "ðŸ‡¹ðŸ‡­" },
            { name: "Turkish", code: "tr", flag: "ðŸ‡¹ðŸ‡·" }, { name: "Turkmen", code: "tk", flag: "ðŸ‡¹ðŸ‡²" },
            { name: "Ukrainian", code: "uk", flag: "ðŸ‡ºðŸ‡¦" }, { name: "Urdu", code: "ur", flag: "ðŸ‡µðŸ‡°" },
            { name: "Uyghur", code: "ug", flag: "ðŸ‡¨ðŸ‡³" }, { name: "Uzbek", code: "uz", flag: "ðŸ‡ºðŸ‡¿" },
            { name: "Vietnamese", code: "vi", flag: "ðŸ‡»ðŸ‡³" }, { name: "Welsh", code: "cy", flag: "ðŸ‡¬ðŸ‡§" },
            { name: "Xhosa", code: "xh", flag: "ðŸ‡¿ðŸ‡¦" }, { name: "Yiddish", code: "yi", flag: "ðŸ³ï¸" },
            { name: "Yoruba", code: "yo", flag: "ðŸ‡³ðŸ‡¬" }, { name: "Zulu", code: "zu", flag: "ðŸ‡¿ðŸ‡¦" }
        ];
        
        window.googleTranslateElementInit = () => {
            new google.translate.TranslateElement({pageLanguage: 'en', layout: google.translate.TranslateElement.InlineLayout.SIMPLE}, 'google_translate_element');
        }

        window.openLang = () => { document.getElementById('langOverlay').style.display = 'flex'; renderLanguages(languages); };
        window.closeLang = () => { document.getElementById('langOverlay').style.display = 'none'; };

        window.renderLanguages = (list) => {
            const container = document.getElementById('list-container');
            container.innerHTML = list.map(l => `
                <div class="lang-item" onclick="setLanguage('${l.code}')">
                    <span class="flag">${l.flag}</span>
                    <span class="lang-name">${l.name}</span>
                </div>
            `).join('');
        }

        window.filterLanguages = () => {
            const term = document.getElementById('langSearch').value.toLowerCase();
            const filtered = languages.filter(l => l.name.toLowerCase().includes(term) || l.code.toLowerCase().includes(term));
            renderLanguages(filtered);
        }

        window.setLanguage = (langCode) => {
            // Google Translate
            var iframe = document.getElementsByClassName('goog-te-menu-frame')[0];
            if(iframe) {
                var innerDoc = iframe.contentDocument || iframe.contentWindow.document;
                var langDivs = innerDoc.getElementsByTagName('div');
                for(var i = 0; i < langDivs.length; i++){
                    if(langDivs[i].getAttribute('value') == langCode){
                        langDivs[i].click();
                    }
                }
            }
            
            // Manual Translation
            if(langCode === 'hi') {
                document.getElementById('login-title').innerText = "à¤²à¥‰à¤— à¤‡à¤¨ à¤•à¤°à¥‡à¤‚";
                document.getElementById('remember-label').innerText = "à¤ªà¤¾à¤¸à¤µà¤°à¥à¤¡ à¤¯à¤¾à¤¦ à¤°à¤–à¥‡à¤‚";
                document.getElementById('login-btn').innerText = "à¤¸à¤«à¤²à¤¤à¤¾à¤ªà¥‚à¤°à¥à¤µà¤• à¤²à¥‰à¤— à¤‡à¤¨ à¤•à¤°à¥‡à¤‚!";
                document.getElementById('go-register-btn').innerText = "à¤•à¥‹à¤ˆ à¤–à¤¾à¤¤à¤¾ à¤¨à¤¹à¥€à¤‚? à¤°à¤œà¤¿à¤¸à¥à¤Ÿà¤° à¤•à¤°à¥‡à¤‚";
                document.getElementById('register-title').innerText = "à¤°à¤œà¤¿à¤¸à¥à¤Ÿà¤° à¤•à¤°à¥‡à¤‚";
                document.getElementById('register-btn').innerText = "à¤…à¤­à¥€ à¤ªà¤‚à¤œà¥€à¤•à¤°à¤£ à¤•à¤°à¥‡à¤‚";
                document.getElementById('go-login-btn').innerText = "à¤ªà¤¹à¤²à¥‡ à¤¸à¥‡ à¤¹à¥€ à¤–à¤¾à¤¤à¤¾ à¤¹à¥ˆ? à¤²à¥‰à¤— à¤‡à¤¨ à¤•à¤°à¥‡à¤‚";
                document.getElementById('lang-btn').innerText = "à¤­à¤¾à¤·à¤¾";
                document.getElementById('service-label').innerText = "à¤¸à¥‡à¤µà¤¾";
            } else if (langCode === 'es') {
                document.getElementById('login-title').innerText = "Iniciar sesiÃ³n";
                document.getElementById('remember-label').innerText = "Recordar contraseÃ±a";
                document.getElementById('login-btn').innerText = "Â¡Inicio de sesiÃ³n exitoso!";
                document.getElementById('go-register-btn').innerText = "Â¿No tienes cuenta? Registrarse";
                document.getElementById('register-title').innerText = "Registrarse";
                document.getElementById('register-btn').innerText = "Registrarse ahora";
                document.getElementById('go-login-btn').innerText = "Â¿Ya tienes cuenta? Iniciar sesiÃ³n";
                document.getElementById('lang-btn').innerText = "Idioma";
                document.getElementById('service-label').innerText = "Servicio";
            } else { // Default to English
                document.getElementById('login-title').innerText = "Log in";
                document.getElementById('remember-label').innerText = "Remember Password";
                document.getElementById('login-btn').innerText = "Login Success!";
                document.getElementById('go-register-btn').innerText = "No account? Register";
                document.getElementById('register-title').innerText = "Register";
                document.getElementById('register-btn').innerText = "Register now";
                document.getElementById('go-login-btn').innerText = "Already have account? Log in";
                document.getElementById('lang-btn').innerText = "Language";
                document.getElementById('service-label').innerText = "Service";
            }

            closeLang(); // Close overlay immediately
        }

        window.togglePass = (id) => { const x = document.getElementById(id); x.type = x.type === "password" ? "text" : "password"; }
        window.goPage = (p) => { document.getElementById('loginPage').className = p === 'loginPage' ? 'page active' : 'page'; document.getElementById('regPage').className = p === 'regPage' ? 'page active' : 'page'; }

        function showMsg(m, t) {
            const b = document.getElementById("msgBox");
            b.innerText = m; b.className = t; b.style.display = "block";
            setTimeout(() => { b.style.display = "none"; }, 2500);
        }

        window.doReg = async () => {
            const ph = document.getElementById('rPhone').value;
            const ps = document.getElementById('rPass').value;
            const cps = document.getElementById('rCPass').value;
            const inv = document.getElementById('invCode').value;

            if(ph.length < 10) return showMsg("Invalid Number", "error");
            if(ps.length < 8) return showMsg("Min 8 Digits", "error");
            if(ps !== cps) return showMsg("Not Match", "error");

            try {
                const userRef = doc(window.db, "users", ph);
                const snap = await getDoc(userRef);
                if(snap.exists()){
                    showMsg("This phone number has bind", "error");
                    setTimeout(() => goPage('loginPage'), 2000);
                    return;
                }
                await setDoc(userRef, { phone: ph, pass: ps, invite: inv, balance: 0, myReferralCode: "VIMO" + Math.floor(1000 + Math.random() * 9000) });
                showMsg("Success!", "success");
                setTimeout(() => goPage('loginPage'), 2000);
            } catch(e) { showMsg("Error", "error"); }
        }

        window.doLogin = async () => {
            const ph = document.getElementById('lPhone').value;
            const ps = document.getElementById('lPass').value;
            if(!ph) return;

            try {
                const snap = await getDoc(doc(window.db, "users", ph));
                if(snap.exists()) {
                    if(snap.data().pass === ps) {
                        localStorage.setItem('vimoUser', ph);
                        showMsg("Login Success!", "success");
                        setTimeout(() => window.location.href="home.html", 1500);
                    } else {
                        showMsg("Wrong Password", "error");
                    }
                } else {
                    showMsg("Please register your number", "error");
                    setTimeout(() => goPage('regPage'), 2000);
                }
            } catch(e) { showMsg("Failed", "error"); }
        }
    </script>
</body>
</html>
